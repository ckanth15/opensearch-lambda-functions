cat > buildspec.yml << 'EOF'
version: 0.2
phases:
  install:
    runtime-versions:
      python: 3.10
  build:
    commands:
      # Install Python dependencies
      - pip install -r requirements.txt -t .
      # Package the CloudFormation template
      - aws cloudformation package --template-file search-function.yaml --s3-bucket artifacts-bucket-gl --output-template-file packaged-template.yaml
artifacts:
  type: zip
  files:
    - search-function.yaml
    - packaged-template.yaml
    - lambda_function.py
    - requirements.txt
    - urllib3/**
    - requests/**
    - requests_aws4auth/**
EOF
